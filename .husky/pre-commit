#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

echo 'ğŸ‘¼â³ğŸ—ï¸  Code styling and building your work before checking branch and commit';

# â€”â€” Style local modified work â€”â€”
npm run stage-all;

# â€”â€” Check Prettier â€”â€”
npm run check:format ||
(
  echo 'ğŸŸ ğŸŸ  FORMAT FAILED - Your format has an error ğŸŸ ğŸŸ 
    Prettier Check Failed. Make the required changes listed above, add changes and try commit again.
    Either "npm run check:format" or "npm run apply:format".
  ';
  false;
);

# â€”â€” Check ESLint â€”â€”
npm run check:lint ||
(
  echo 'ğŸŸ¡ğŸŸ¡ LINT FAILED - Your lint has an error ğŸŸ¡ğŸŸ¡
    ESLint Check Failed... Make the required changes listed above, add changes, and try to commit again.
    Either "npm run check:lint" or "npm run apply:lint".
  ';
  false;
);

# echo 'ğŸ¤”ğŸ§ Alright.. Code looks good to me.. Trying to build now. ğŸ¤”ğŸ§';

# â€”â€” Check Build â€”â€”
# npm run build:dev ||
# (
#   echo 'âŒğŸ‘·ğŸ¥µ YOUR BUILD FAILED - Go live in a box! âŒğŸ‘·ğŸ¥µ
#     Build Release Failed... View the errors above to see why.';
#   false;
# )
# && npm run unbuild

# If everything passes - Now we can commit
echo 'âœ…âœ…âœ… PRE-COMMIT â€” Pass! Let us continue (1). âœ…âœ…âœ…';
