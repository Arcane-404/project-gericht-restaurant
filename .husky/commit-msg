#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

echo 'ğŸ¤”â³ğŸ’¬ Checking branch name and commit message before sending it to the remote repository';

# checking for max length :: 78 characters

# â€”â€” Check Branch Name â€”â€”
if [[ $(git rev-parse --abbrev-ref HEAD) = main ]]; then
    echo 'âšªâšª BRANCH ABORTED â€” Do not commit on main branch âšªâšª';
    exit 1;
fi;

# â€”â€” Check Commit Message â€”â€”
npm run git:check -- $1 || (
    echo 'ğŸ”´ğŸ”´ COMMIT ABORTED â€” Your commit message is invalid. ğŸ”´ğŸ”´';
    exit 1;
);

# If everything passes... Now we can commit
echo 'âœ…âœ…âœ… COMMIT-MSG â€” Pass! Let us continue (2). âœ…âœ…âœ…';
